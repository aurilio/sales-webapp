<h1>Listagem de Vendas</h1>

<app-back-to-home-button></app-back-to-home-button>

<div *ngIf="isLoading">
  <p>üîÑ Carregando vendas...</p>
</div>

<div *ngIf="!isLoading && errorMessage">
  <p style="color: red;">‚ùå {{ errorMessage }}</p>
</div>

<div *ngIf="!isLoading && sales.length === 0 && !errorMessage">
  <p>Nenhuma venda encontrada.</p>
</div>

<table *ngIf="!isLoading && sales.length > 0" border="1" cellspacing="0" cellpadding="8" style="width: 100%; margin-top: 1rem;">
  <thead>
    <tr>
      <th>N√∫mero</th>
      <th>Data</th>
      <th>Cliente</th>
      <th>Filial</th>
      <th>Total (R$)</th>
      <th>Status</th>
      <th>A√ß√µes</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let sale of sales; let i = index">
      <td>{{ sale.saleNumber }}</td>
      <td>{{ sale.saleDate | date: 'shortDate' }}</td>
      <td>{{ sale.customerName }}</td>
      <td>{{ sale.branch }}</td>
      <td>{{ sale.totalAmount | number:'1.2-2' }}</td>
      <td>{{ sale.isCancelled ? 'Cancelada' : 'Ativa' }}</td>
      <td>
        <button [routerLink]="['/sales', sale.id]">Detalhes</button>
        <button [routerLink]="['/sales/edit', sale.id]">Editar</button>
        <button (click)="deleteSale(sale.id)">Excluir</button>
      </td>
    </tr>
  </tbody>
</table>

<!-- Pagina√ß√£o -->
<div *ngIf="!isLoading && totalPages > 1" style="margin-top: 1rem; display: flex; justify-content: center; gap: 1rem;">
  <button (click)="previousPage()" [disabled]="currentPage === 1">‚¨ÖÔ∏è Anterior</button>
  <span>P√°gina {{ currentPage }} de {{ totalPages }}</span>
  <button (click)="nextPage()" [disabled]="currentPage === totalPages">Pr√≥xima ‚û°Ô∏è</button>
</div>
