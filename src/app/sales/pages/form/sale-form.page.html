<h1>{{ isEditMode ? 'Editar' : 'Nova' }} Venda</h1>

<app-back-to-home-button></app-back-to-home-button>

<form [formGroup]="form" (ngSubmit)="save()">
  <div>
    <label>NÃºmero da Venda:</label>
    <input formControlName="saleNumber" />
  </div>

  <div>
    <label>Data da Venda:</label>
    <input type="date" formControlName="saleDate" />
  </div>

  <div>
    <label>Cliente (ID):</label>
    <input formControlName="customerId" />
  </div>
  
  <div>
    <label>Nome do Cliente:</label>
    <input formControlName="customerName" />
  </div>

  <div>
    <label>Filial:</label>
    <input formControlName="branch" />
  </div>

  <div>
    <label>Cancelada:</label>
    <input type="checkbox" formControlName="isCancelled" />
  </div>

  <hr />

  <h3>Itens da Venda</h3>
  <div formArrayName="items">
    <ng-container *ngFor="let item of items; let i = index">
      <div *ngIf="item instanceof FormGroup">
        <app-sale-item-form
          [item]="item"
          [index]="i"
          (remove)="removeItem($event)">
        </app-sale-item-form>
      </div>
    </ng-container>
  </div>

  <button type="button" (click)="addItem()">Adicionar Item</button>

  <br /><br />
  <button type="submit">{{ isEditMode ? 'Atualizar' : 'Salvar' }}</button>
</form>
